<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>MTEX.dev | System Statistics</title>
    <meta name="description" content="Real-time API usage and performance metrics for the MTEX ecosystem.">
    <meta name="theme-color" content="#0a0a0a">

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Fira+Code:wght@300;500&family=Inter:wght@400;700&display=swap');
        
        body { 
            font-family: 'Inter', sans-serif; 
            background-color: #0a0a0a; 
            color: #ededed; 
            scrollbar-gutter: stable;
        }

        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #0a0a0a; }
        ::-webkit-scrollbar-thumb { background: #262626; border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: #333; }

        .mono { font-family: 'Fira Code', monospace; }
        .gradient-text { 
            background: linear-gradient(90deg, #4facfe 0%, #00f2fe 100%); 
            -webkit-background-clip: text; 
            -webkit-text-fill-color: transparent; 
        }

        .stats-card {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        ::selection {
            background-color: rgba(79, 172, 254, 0.3);
            color: #fff;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col">

    <header class="container mx-auto px-6 py-12">
        <nav class="flex justify-between items-center">
            <a href="index.html" class="text-2xl font-bold mono gradient-text">MTEX.dev</a>
            <div class="space-x-6 flex items-center">
                <a href="index.html" class="text-xs uppercase tracking-widest text-gray-400 hover:text-cyan-400 transition">Home</a>
                <a href="https://status.mtex.dev" class="text-xs uppercase tracking-widest text-gray-400 hover:text-cyan-400 transition">Status</a>
            </div>
        </nav>
    </header>

    <main class="container mx-auto px-6 flex-grow mb-12">
        <section class="max-w-6xl mx-auto">
            <div class="mb-12">
                <h1 class="text-4xl md:text-5xl font-bold mb-4">Network Insights</h1>
                <p class="text-gray-400 max-w-2xl">
                    Live traffic metrics for <code class="mono text-cyan-400 text-sm">getmy.name</code> and the MTEX API suite.
                </p>
            </div>

            <!-- Summary Cards -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                <div class="stats-card p-6 rounded-lg">
                    <p class="text-xs uppercase tracking-widest text-gray-500 mb-1">Total API Requests</p>
                    <h2 id="total-requests" class="text-3xl font-bold mono">---</h2>
                </div>
                <div class="stats-card p-6 rounded-lg border-l-2 border-l-cyan-500">
                    <p class="text-xs uppercase tracking-widest text-gray-500 mb-1">Requests Today</p>
                    <h2 id="today-requests" class="text-3xl font-bold mono text-cyan-400">---</h2>
                </div>
            </div>

            <!-- Chart Section -->
            <div class="stats-card p-6 rounded-lg mb-8">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="mono text-sm uppercase tracking-widest text-gray-400">getmy.name requests (last 30 days)</h3>
                </div>
                <div class="relative h-[400px] w-full">
                    <canvas id="apiChart"></canvas>
                </div>
            </div>

            <div class="flex justify-center">
                <a href="https://getmy.name/stats/api-requests" class="inline-flex items-center px-8 py-3 bg-cyan-500/10 border border-cyan-500/50 text-cyan-400 hover:bg-cyan-500 hover:text-black transition-all rounded font-bold mono text-sm uppercase tracking-widest">
                    View Full Stats-Page
                </a>
            </div>
        </section>
    </main>

    <footer class="container mx-auto px-6 py-12 border-t border-white/10">
        <div class="flex flex-col md:flex-row justify-between items-center gap-4">
            <p class="text-xs text-gray-600 mono">
                &copy; 2026 MTEX.dev | Metrics updated in real-time.
            </p>
            <div class="flex gap-6 text-xs uppercase tracking-widest">
                <a href="https://legal.mtex.dev/imprint" class="text-gray-500 hover:text-white transition">Imprint</a>
                <a href="https://legal.mtex.dev/privacy" class="text-gray-500 hover:text-white transition">Privacy</a>
            </div>
        </div>
    </footer>

    <script>
        async function initStats() {
            const ctx = document.getElementById('apiChart').getContext('2d');
            const totalEl = document.getElementById('total-requests');
            const todayEl = document.getElementById('today-requests');

            try {
                const response = await fetch('https://getmy.name/stats/data/api-requests');
                const data = await response.json();

                // Update text stats
                totalEl.textContent = data.stats.total.toLocaleString();
                todayEl.textContent = data.stats.today.toLocaleString();

                // Create Chart
                new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: data.labels,
                        datasets: [{
                            label: 'API Requests',
                            data: data.counts,
                            borderColor: '#22d3ee',
                            backgroundColor: 'rgba(34, 211, 238, 0.1)',
                            borderWidth: 2,
                            fill: true,
                            tension: 0.4,
                            pointBackgroundColor: '#22d3ee',
                            pointRadius: 0,
                            pointHoverRadius: 6
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { display: false },
                            tooltip: {
                                mode: 'index',
                                intersect: false,
                                backgroundColor: '#171717',
                                titleFont: { family: 'Fira Code' },
                                bodyFont: { family: 'Fira Code' },
                                borderColor: 'rgba(255,255,255,0.1)',
                                borderWidth: 1
                            }
                        },
                        scales: {
                            x: {
                                grid: { color: 'rgba(255, 255, 255, 0.05)' },
                                ticks: { 
                                    color: '#525252', 
                                    font: { family: 'Fira Code', size: 10 },
                                    maxRotation: 45,
                                    minRotation: 45
                                }
                            },
                            y: {
                                beginAtZero: true,
                                grid: { color: 'rgba(255, 255, 255, 0.05)' },
                                ticks: { 
                                    color: '#525252', 
                                    font: { family: 'Fira Code', size: 10 } 
                                }
                            }
                        }
                    }
                });

            } catch (error) {
                console.error('Error loading stats:', error);
                totalEl.textContent = 'Error';
                todayEl.textContent = 'Error';
            }
        }

        document.addEventListener('DOMContentLoaded', initStats);
    </script>
</body>
</html>